import{r as i,x as A,j as e,Q as G,t as c,V as x}from"./app-CmBlcd84.js";import{A as R}from"./AuthenticatedLayout-CmWRajLL.js";import"./transition-NaYtFRWC.js";function O({orders:a,statusFilter:d}){var P;const[t,u]=i.useState(null),[g,o]=i.useState(!1),[b,j]=i.useState("view"),[y,k]=i.useState(null),{data:l,setData:v,post:m,processing:f,errors:N,reset:C}=A({product_photo:null,notes:"",tracking_code:"",invoice_number:""}),E=s=>{u(s),j("view"),o(!0),C()},L=s=>{m(route("production.orders.start",s.id),{onSuccess:()=>{x.success("Produ√ß√£o iniciada!"),o(!1)}})},S=()=>{if(!l.product_photo){x.error("Por favor, selecione uma foto do produto");return}m(route("production.orders.upload-photo",t.id),{onSuccess:()=>{x.success("Foto enviada para aprova√ß√£o!"),o(!1)}})},B=()=>{m(route("production.orders.generate-shipping",t.id),{onSuccess:()=>{x.success("Etiqueta de envio gerada!"),o(!1)}})},M=s=>{const r=s.target.files[0];if(r){v("product_photo",r);const n=new FileReader;n.onloadend=()=>{k(n.result)},n.readAsDataURL(r)}},_=s=>{const r={payment_approved:"bg-green-100 text-green-800",in_production:"bg-blue-100 text-blue-800",photo_sent:"bg-purple-100 text-purple-800",ready_for_shipping:"bg-teal-100 text-teal-800",shipped:"bg-gray-100 text-gray-800"},n={payment_approved:"‚úÖ Pronto para Produ√ß√£o",in_production:"üè≠ Em Produ√ß√£o",photo_sent:"üì∏ Foto Enviada",ready_for_shipping:"üì¶ Pronto para Envio",shipped:"üöö Enviado"};return e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${r[s]}`,children:n[s]})},w=s=>{switch(s.order_status){case"payment_approved":return e.jsx("button",{onClick:r=>{r.stopPropagation(),L(s)},className:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors text-sm",children:"Iniciar Produ√ß√£o"});case"in_production":return e.jsx("button",{onClick:r=>{r.stopPropagation(),u(s),j("photo"),o(!0)},className:"bg-purple-500 text-white px-4 py-2 rounded-lg hover:bg-purple-600 transition-colors text-sm",children:"Enviar Foto"});case"ready_for_shipping":return e.jsx("button",{onClick:r=>{r.stopPropagation(),B()},className:"bg-teal-500 text-white px-4 py-2 rounded-lg hover:bg-teal-600 transition-colors text-sm",children:"Gerar Envio"});default:return null}},F=s=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(s),p=s=>new Date(s).toLocaleDateString("pt-BR"),h={payment_approved:a.filter(s=>s.order_status==="payment_approved").length,in_production:a.filter(s=>s.order_status==="in_production").length,photo_sent:a.filter(s=>s.order_status==="photo_sent").length,ready_for_shipping:a.filter(s=>s.order_status==="ready_for_shipping").length};return e.jsxs(e.Fragment,{children:[e.jsx(G,{title:"Gest√£o de Produ√ß√£o - Pedidos"}),e.jsxs(R,{header:e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white p-6 rounded-lg shadow-lg",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"üè≠ Gest√£o de Produ√ß√£o"}),e.jsx("p",{className:"text-blue-100 mt-1",children:"Gerencie o processo de produ√ß√£o e envio dos pedidos"})]}),children:[e.jsx("div",{className:"py-12 bg-gray-50 min-h-screen",children:e.jsxs("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-md mb-6",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"-mb-px flex space-x-8 px-6",children:[e.jsxs(c,{href:route("production.orders.index"),className:`py-4 px-1 border-b-2 font-medium text-sm ${!d||d==="all"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Todos (",a.length,")"]}),e.jsxs(c,{href:route("production.orders.index",{status:"payment_approved"}),className:`py-4 px-1 border-b-2 font-medium text-sm ${d==="payment_approved"?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Pronto p/ Produ√ß√£o (",h.payment_approved,")"]}),e.jsxs(c,{href:route("production.orders.index",{status:"in_production"}),className:`py-4 px-1 border-b-2 font-medium text-sm ${d==="in_production"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Em Produ√ß√£o (",h.in_production,")"]}),e.jsxs(c,{href:route("production.orders.index",{status:"ready_for_shipping"}),className:`py-4 px-1 border-b-2 font-medium text-sm ${d==="ready_for_shipping"?"border-teal-500 text-teal-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Prontos p/ Envio (",h.ready_for_shipping,")"]})]})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(s=>e.jsx("div",{className:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>E(s),children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s.client_name}),_(s.order_status)]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("strong",{children:"Kit:"})," ",s.child_name]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("strong",{children:"Bordado:"})," ",s.embroidery_color," ‚Ä¢ ",s.embroidery_position]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("strong",{children:"Vendedora:"})," ",s.user.name]}),s.production_started_at&&e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("strong",{children:"Iniciado:"})," ",p(s.production_started_at)]})]}),e.jsx("div",{className:"border-t pt-4 mb-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Valor:"}),e.jsx("span",{className:"font-semibold text-gray-900",children:F(s.total_amount)})]})}),e.jsx("div",{className:"flex justify-center",children:w(s)})]})},s.id))}),a.length===0&&e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-12 text-center",children:[e.jsx("div",{className:"w-24 h-24 mx-auto mb-6 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-12 h-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 7.172V5L8 4z"})})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhum pedido na produ√ß√£o"}),e.jsx("p",{className:"text-gray-500",children:"Todos os pedidos foram processados ou n√£o h√° pedidos pendentes."})]})]})}),g&&t&&b==="view"&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-4xl max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:["Detalhes do Pedido - ",t.client_name]}),e.jsx("button",{onClick:()=>o(!1),className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"flex-1 overflow-auto p-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Especifica√ß√µes do Produto"}),e.jsxs("div",{className:"space-y-3 bg-gray-50 p-4 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Nome da Crian√ßa"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:t.child_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Posi√ß√£o do Bordado"}),e.jsx("p",{className:"text-gray-900",children:t.embroidery_position})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Cor do Bordado"}),e.jsx("p",{className:"text-gray-900",children:t.embroidery_color})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Fonte"}),e.jsx("p",{className:"text-gray-900",children:t.embroidery_font})]})]}),e.jsx("h4",{className:"text-lg font-semibold mt-6 mb-4",children:"Informa√ß√µes do Cliente"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Cliente"}),e.jsx("p",{className:"text-gray-900",children:t.client_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Telefone"}),e.jsx("p",{className:"text-gray-900",children:t.client_phone||"N√£o informado"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Endere√ßo de Entrega"}),e.jsx("p",{className:"text-gray-900",children:t.delivery_address?e.jsxs(e.Fragment,{children:[t.delivery_address,", ",t.delivery_number,e.jsx("br",{}),t.delivery_complement&&`${t.delivery_complement}, `,t.delivery_neighborhood,e.jsx("br",{}),t.delivery_city,"/",t.delivery_state," - ",t.delivery_zipcode]}):"N√£o informado"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Status da Produ√ß√£o"}),e.jsxs("div",{className:"space-y-4",children:[_(t.order_status),t.production_started_at&&e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-blue-900",children:"Produ√ß√£o Iniciada"}),e.jsx("p",{className:"text-blue-700",children:p(t.production_started_at)}),t.production_admin&&e.jsxs("p",{className:"text-sm text-blue-600",children:["Por: ",t.production_admin.name]})]}),t.photo_sent_at&&e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-purple-900",children:"Foto Enviada"}),e.jsx("p",{className:"text-purple-700",children:p(t.photo_sent_at)})]}),t.tracking_code&&e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-green-900",children:"C√≥digo de Rastreio"}),e.jsx("p",{className:"font-mono text-green-700",children:t.tracking_code})]})]}),t.notes&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Observa√ß√µes"}),e.jsx("p",{className:"text-gray-900 bg-gray-50 p-3 rounded-lg",children:t.notes})]})]})]})}),e.jsxs("div",{className:"flex justify-end gap-4 p-6 border-t bg-gray-50",children:[e.jsx("button",{onClick:()=>o(!1),className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Fechar"}),w(t)]})]})}),g&&t&&b==="photo"&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:["Enviar Foto do Produto - ",t.child_name]}),e.jsx("button",{onClick:()=>o(!1),className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Foto do Produto Finalizado"}),e.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-lg hover:border-purple-400 transition-colors",children:e.jsx("div",{className:"space-y-1 text-center",children:y?e.jsxs("div",{children:[e.jsx("img",{src:y,alt:"Preview",className:"mx-auto h-48 w-auto rounded"}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:(P=l.product_photo)==null?void 0:P.name})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsxs("div",{className:"flex text-sm text-gray-600",children:[e.jsxs("label",{htmlFor:"product_photo",className:"relative cursor-pointer rounded-md bg-white font-medium text-purple-600 hover:text-purple-500",children:[e.jsx("span",{children:"Selecionar foto"}),e.jsx("input",{id:"product_photo",type:"file",className:"sr-only",accept:"image/*",onChange:M,required:!0})]}),e.jsx("p",{className:"pl-1",children:"ou arraste aqui"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG at√© 5MB"})]})})}),N.product_photo&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:N.product_photo})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observa√ß√µes (opcional)"}),e.jsx("textarea",{value:l.notes,onChange:s=>v("notes",s.target.value),rows:3,className:"w-full rounded-lg border-gray-300 focus:border-purple-500 focus:ring-purple-500",placeholder:"Adicione observa√ß√µes sobre o produto..."})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 p-6 border-t bg-gray-50",children:[e.jsx("button",{onClick:()=>o(!1),className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancelar"}),e.jsx("button",{onClick:S,disabled:f||!l.product_photo,className:"px-6 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:f?"Enviando...":"Enviar para Aprova√ß√£o"})]})]})})]})]})}export{O as default};
