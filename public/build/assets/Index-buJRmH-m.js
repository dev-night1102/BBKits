import{r as s,j as e,x as b,Q as k,t as c,V as p}from"./app-B2Nxg0cu.js";import{A as C}from"./AuthenticatedLayout-D7JqdPC0.js";import{P as u}from"./PrimaryButton-BJsDc-PE.js";import{L as x,D as E,S as D}from"./SecondaryButton-Crw_juJf.js";import{z as m}from"./transition-5jTyyVuc.js";function L({title:a,titleId:n,...r},l){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":n},r),a?s.createElement("title",{id:n},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const V=s.forwardRef(L);function S({show:a,onClose:n,onConfirm:r,title:l,message:i,processing:d}){return e.jsx(m.Root,{show:a,as:s.Fragment,children:e.jsxs(x,{as:"div",className:"relative z-50",onClose:n,children:[e.jsx(m.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"})}),e.jsx("div",{className:"fixed inset-0 z-10 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:e.jsx(m.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:e.jsxs(x.Panel,{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg",children:[e.jsx("div",{className:"bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4",children:e.jsxs("div",{className:"sm:flex sm:items-start",children:[e.jsx("div",{className:"mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:e.jsx(V,{className:"h-6 w-6 text-red-600","aria-hidden":"true"})}),e.jsxs("div",{className:"mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left",children:[e.jsx(x.Title,{as:"h3",className:"text-base font-semibold leading-6 text-gray-900",children:l}),e.jsx("div",{className:"mt-2",children:e.jsx("p",{className:"text-sm text-gray-500",children:i})})]})]})}),e.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",children:[e.jsx(E,{onClick:r,disabled:d,className:"sm:ml-3",children:d?"Excluindo...":"Excluir"}),e.jsx(D,{onClick:n,disabled:d,children:"Cancelar"})]})]})})})})]})})}function _({sales:a}){const[n,r]=s.useState(!1),[l,i]=s.useState(null),{delete:d,processing:y}=b(),g=t=>{i(t),r(!0)},f=()=>{l&&d(route("sales.destroy",l.id),{onSuccess:()=>{p.success("Venda excluída com sucesso!"),r(!1),i(null)},onError:()=>{p.error("Erro ao excluir a venda."),r(!1),i(null)}})},j=()=>{r(!1),i(null)},v=t=>{const o={pendente:"bg-yellow-100 text-yellow-800",aprovado:"bg-green-100 text-green-800",recusado:"bg-red-100 text-red-800",cancelado:"bg-gray-100 text-gray-800",estornado:"bg-purple-100 text-purple-800"},N={pendente:"Pendente",aprovado:"Aprovado",recusado:"Recusado",cancelado:"Cancelado",estornado:"Estornado"};return e.jsx("span",{className:`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ${o[t]}`,children:N[t]})},h=t=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t),w=t=>new Date(t).toLocaleDateString("pt-BR");return e.jsxs(C,{header:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Minhas Vendas"}),e.jsx(c,{href:route("sales.create"),children:e.jsx(u,{children:"Nova Venda"})})]}),children:[e.jsx(k,{title:"Vendas"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden bg-white shadow-sm sm:rounded-lg",children:e.jsx("div",{className:"p-6 text-gray-900",children:a.data.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Nenhuma venda registrada"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Comece registrando sua primeira venda."}),e.jsx("div",{className:"mt-6",children:e.jsx(c,{href:route("sales.create"),children:e.jsx(u,{children:"Registrar Primeira Venda"})})})]}):e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Cliente"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Valor Total"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Valor Recebido"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Data Pagamento"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Ações"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:a.data.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-medium text-gray-900",children:t.client_name}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-gray-500",children:h(t.total_amount)}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-gray-500",children:h(t.received_amount)}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-gray-500",children:w(t.payment_date)}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-gray-500",children:v(t.status)}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(c,{href:route("sales.show",t.id),className:"text-indigo-600 hover:text-indigo-900",children:"Ver"}),t.status==="pendente"&&e.jsxs(e.Fragment,{children:[e.jsx(c,{href:route("sales.edit",t.id),className:"text-yellow-600 hover:text-yellow-900",children:"Editar"}),e.jsx("button",{onClick:()=>g(t),className:"text-red-600 hover:text-red-900",children:"Excluir"})]})]})})]},t.id))})]}),a.links&&a.links.length>0&&e.jsxs("div",{className:"mt-6 flex justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Mostrando ",a.from," a ",a.to," de ",a.total," resultados"]}),e.jsx("div",{className:"flex space-x-2",children:a.links.filter(t=>t&&t.url!==null).map((t,o)=>t.url?e.jsx(c,{href:t.url,className:`px-3 py-2 text-sm rounded-md ${t.active?"bg-indigo-600 text-white":"bg-white text-gray-500 hover:text-gray-700"}`,dangerouslySetInnerHTML:{__html:t.label}},o):e.jsx("span",{className:"px-3 py-2 text-sm rounded-md bg-gray-100 text-gray-400 cursor-not-allowed",dangerouslySetInnerHTML:{__html:t.label}},o))})]})]})})})})}),e.jsx(S,{show:n,onClose:j,onConfirm:f,title:"Excluir Venda",message:l?`Tem certeza que deseja excluir a venda para ${l.client_name}? Esta ação não pode ser desfeita.`:"",processing:y})]})}export{_ as default};
