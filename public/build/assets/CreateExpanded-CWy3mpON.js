import{x as E,r as b,j as e,Q as B,V as d}from"./app-RFMOYwLW.js";import{A as D}from"./AuthenticatedLayout-C45zV6mZ.js";import"./transition-DtXBfAIA.js";function S(){var g;const{data:t,setData:l,post:y,processing:m,errors:s}=E({client_name:"",client_email:"",client_phone:"",client_cpf:"",child_name:"",embroidery_position:"center",embroidery_color:"pink",embroidery_font:"cursive",total_amount:"",shipping_amount:"",payment_method:"pix",received_amount:"",payment_date:"",payment_receipt:null,delivery_address:"",delivery_number:"",delivery_complement:"",delivery_neighborhood:"",delivery_city:"",delivery_state:"",delivery_zipcode:"",notes:""}),[i,f]=b.useState(!1),[u,j]=b.useState(null),v=r=>{const o=r.target.files[0];if(o){l("payment_receipt",o);const a=new FileReader;a.onloadend=()=>{j(a.result)},a.readAsDataURL(o)}},_=()=>{if(["client_name","client_email","client_phone","child_name","total_amount","shipping_amount","received_amount","payment_date","payment_method","delivery_address","delivery_number","delivery_neighborhood","delivery_city","delivery_state","delivery_zipcode"].filter(q=>!t[q]).length>0)return d.error("Por favor, preencha todos os campos obrigatórios"),!1;if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.client_email))return d.error("Por favor, insira um e-mail válido"),!1;const n=/^\d{10,11}$/,F=t.client_phone.replace(/\D/g,"");if(!n.test(F))return d.error("Por favor, insira um telefone válido"),!1;const R=/^\d{11}$/,$=t.client_cpf.replace(/\D/g,"");return t.client_cpf&&!R.test($)?(d.error("Por favor, insira um CPF válido"),!1):parseFloat(t.received_amount)>parseFloat(t.total_amount)?(d.error("Valor recebido não pode ser maior que o valor total"),!1):!0},N=r=>{r.preventDefault(),_()&&y(route("sales.store"),{onSuccess:()=>{d.success("Venda registrada com sucesso! Cliente receberá o link personalizado. 🎉")},onError:o=>{Object.keys(o).forEach(a=>{d.error(o[a])})}})},w=r=>{const o=r.replace(/\D/g,""),a=o.match(/^(\d{2})(\d{5})(\d{4})$/);if(a)return`(${a[1]}) ${a[2]}-${a[3]}`;const n=o.match(/^(\d{2})(\d{4})(\d{4})$/);return n?`(${n[1]}) ${n[2]}-${n[3]}`:r},C=r=>{const a=r.replace(/\D/g,"").match(/^(\d{3})(\d{3})(\d{3})(\d{2})$/);return a?`${a[1]}.${a[2]}.${a[3]}-${a[4]}`:r},k=r=>{const a=r.replace(/\D/g,"").match(/^(\d{5})(\d{3})$/);return a?`${a[1]}-${a[2]}`:r},c={top:"Topo",bottom:"Base",left:"Esquerda",right:"Direita",center:"Centro"},p={pink:"Rosa",blue:"Azul",gold:"Dourado",silver:"Prata",white:"Branco",black:"Preto"},x={cursive:"Cursiva",bold:"Negrito",elegant:"Elegante",playful:"Divertida"},h={pix:"PIX",boleto:"Boleto",cartao:"Cartão",dinheiro:"Dinheiro"},P=["AC","AL","AP","AM","BA","CE","DF","ES","GO","MA","MT","MS","MG","PA","PB","PR","PE","PI","RJ","RN","RS","RO","RR","SC","SP","SE","TO"];return e.jsxs(e.Fragment,{children:[e.jsx(B,{title:"Registrar Venda Completa"}),e.jsx(D,{header:e.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white p-6 rounded-lg shadow-lg",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"✨ Novo Pedido BBKits"}),e.jsx("p",{className:"text-purple-100 mt-1",children:"Preencha todos os dados do pedido para gerar o link personalizado da cliente"})]}),children:e.jsx("div",{className:"py-12 bg-gray-50 min-h-screen",children:e.jsx("div",{className:"mx-auto max-w-5xl px-4 sm:px-6 lg:px-8",children:e.jsxs("form",{onSubmit:N,className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 bg-purple-100 text-purple-600 rounded-lg flex items-center justify-center",children:"👤"}),"Dados da Cliente"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome Completo *"}),e.jsx("input",{type:"text",value:t.client_name,onChange:r=>l("client_name",r.target.value),className:"w-full rounded-lg border-gray-300 focus:border-purple-500 focus:ring-purple-500",placeholder:"Maria Silva",required:!0}),s.client_name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.client_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"E-mail *"}),e.jsx("input",{type:"email",value:t.client_email,onChange:r=>l("client_email",r.target.value),className:"w-full rounded-lg border-gray-300 focus:border-purple-500 focus:ring-purple-500",placeholder:"maria@email.com",required:!0}),s.client_email&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.client_email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Telefone *"}),e.jsx("input",{type:"tel",value:t.client_phone,onChange:r=>l("client_phone",w(r.target.value)),className:"w-full rounded-lg border-gray-300 focus:border-purple-500 focus:ring-purple-500",placeholder:"(11) 98765-4321",required:!0}),s.client_phone&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.client_phone})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CPF"}),e.jsx("input",{type:"text",value:t.client_cpf,onChange:r=>l("client_cpf",C(r.target.value)),className:"w-full rounded-lg border-gray-300 focus:border-purple-500 focus:ring-purple-500",placeholder:"123.456.789-00"}),s.client_cpf&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.client_cpf})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 bg-pink-100 text-pink-600 rounded-lg flex items-center justify-center",children:"🎨"}),"Personalização do Bordado"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome da Criança *"}),e.jsx("input",{type:"text",value:t.child_name,onChange:r=>l("child_name",r.target.value),className:"w-full rounded-lg border-gray-300 focus:border-purple-500 focus:ring-purple-500",placeholder:"Helena",required:!0}),s.child_name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.child_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Posição do Bordado"}),e.jsx("select",{value:t.embroidery_position,onChange:r=>l("embroidery_position",r.target.value),className:"w-full rounded-lg border-gray-300 focus:border-purple-500 focus:ring-purple-500",children:Object.entries(c).map(([r,o])=>e.jsx("option",{value:r,children:o},r))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cor do Bordado"}),e.jsx("select",{value:t.embroidery_color,onChange:r=>l("embroidery_color",r.target.value),className:"w-full rounded-lg border-gray-300 focus:border-purple-500 focus:ring-purple-500",children:Object.entries(p).map(([r,o])=>e.jsx("option",{value:r,children:o},r))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fonte do Bordado"}),e.jsx("select",{value:t.embroidery_font,onChange:r=>l("embroidery_font",r.target.value),className:"w-full rounded-lg border-gray-300 focus:border-purple-500 focus:ring-purple-500",children:Object.entries(x).map(([r,o])=>e.jsx("option",{value:r,children:o},r))})]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Prévia:"}),e.jsxs("div",{className:"text-center p-4 bg-white rounded border-2 border-dashed border-gray-300",children:[e.jsx("p",{className:`text-2xl font-${t.embroidery_font==="bold"?"bold":t.embroidery_font==="cursive"?"script":"serif"}`,style:{color:t.embroidery_color==="gold"?"#FFD700":t.embroidery_color==="silver"?"#C0C0C0":t.embroidery_color},children:t.child_name||"Nome da Criança"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Posição: ",c[t.embroidery_position]]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 bg-green-100 text-green-600 rounded-lg flex items-center justify-center",children:"💰"}),"Informações de Pagamento"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Valor Total *"}),e.jsx("input",{type:"number",step:"0.01",value:t.total_amount,onChange:r=>l("total_amount",r.target.value),className:"w-full rounded-lg border-gray-300 focus:border-purple-500 focus:ring-purple-500",placeholder:"299.90",required:!0}),s.total_amount&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.total_amount})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Valor do Frete *"}),e.jsx("input",{type:"number",step:"0.01",value:t.shipping_amount,onChange:r=>l("shipping_amount",r.target.value),className:"w-full rounded-lg border-gray-300 focus:border-purple-500 focus:ring-purple-500",placeholder:"25.00",required:!0}),s.shipping_amount&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.shipping_amount})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Forma de Pagamento *"}),e.jsx("select",{value:t.payment_method,onChange:r=>l("payment_method",r.target.value),className:"w-full rounded-lg border-gray-300 focus:border-purple-500 focus:ring-purple-500",required:!0,children:Object.entries(h).map(([r,o])=>e.jsx("option",{value:r,children:o},r))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Valor Recebido *"}),e.jsx("input",{type:"number",step:"0.01",value:t.received_amount,onChange:r=>l("received_amount",r.target.value),className:"w-full rounded-lg border-gray-300 focus:border-purple-500 focus:ring-purple-500",placeholder:"150.00",required:!0}),s.received_amount&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.received_amount}),t.received_amount&&t.total_amount&&e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:parseFloat(t.received_amount)<parseFloat(t.total_amount)?e.jsxs("span",{className:"text-orange-600",children:["⚠️ Pagamento parcial - Restante: R$ ",(parseFloat(t.total_amount)-parseFloat(t.received_amount)).toFixed(2)]}):e.jsx("span",{className:"text-green-600",children:"✅ Pagamento completo"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data do Pagamento *"}),e.jsx("input",{type:"date",value:t.payment_date,onChange:r=>l("payment_date",r.target.value),className:"w-full rounded-lg border-gray-300 focus:border-purple-500 focus:ring-purple-500",required:!0}),s.payment_date&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.payment_date})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Comprovante de Pagamento"}),e.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-lg hover:border-purple-400 transition-colors",children:e.jsx("div",{className:"space-y-1 text-center",children:u?e.jsxs("div",{children:[e.jsx("img",{src:u,alt:"Preview",className:"mx-auto h-32 w-auto rounded"}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:(g=t.payment_receipt)==null?void 0:g.name})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),e.jsxs("div",{className:"flex text-sm text-gray-600",children:[e.jsxs("label",{htmlFor:"payment_receipt",className:"relative cursor-pointer rounded-md bg-white font-medium text-purple-600 hover:text-purple-500",children:[e.jsx("span",{children:"Enviar arquivo"}),e.jsx("input",{id:"payment_receipt",type:"file",className:"sr-only",accept:"image/*,application/pdf",onChange:v})]}),e.jsx("p",{className:"pl-1",children:"ou arraste aqui"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, PDF até 2MB"})]})})}),s.payment_receipt&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.payment_receipt})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 bg-blue-100 text-blue-600 rounded-lg flex items-center justify-center",children:"📦"}),"Endereço de Entrega"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Endereço *"}),e.jsx("input",{type:"text",value:t.delivery_address,onChange:r=>l("delivery_address",r.target.value),className:"w-full rounded-lg border-gray-300 focus:border-purple-500 focus:ring-purple-500",placeholder:"Rua das Flores",required:!0}),s.delivery_address&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.delivery_address})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Número *"}),e.jsx("input",{type:"text",value:t.delivery_number,onChange:r=>l("delivery_number",r.target.value),className:"w-full rounded-lg border-gray-300 focus:border-purple-500 focus:ring-purple-500",placeholder:"123",required:!0}),s.delivery_number&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.delivery_number})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Complemento"}),e.jsx("input",{type:"text",value:t.delivery_complement,onChange:r=>l("delivery_complement",r.target.value),className:"w-full rounded-lg border-gray-300 focus:border-purple-500 focus:ring-purple-500",placeholder:"Apto 12B"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bairro *"}),e.jsx("input",{type:"text",value:t.delivery_neighborhood,onChange:r=>l("delivery_neighborhood",r.target.value),className:"w-full rounded-lg border-gray-300 focus:border-purple-500 focus:ring-purple-500",placeholder:"Jardim Primavera",required:!0}),s.delivery_neighborhood&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.delivery_neighborhood})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cidade *"}),e.jsx("input",{type:"text",value:t.delivery_city,onChange:r=>l("delivery_city",r.target.value),className:"w-full rounded-lg border-gray-300 focus:border-purple-500 focus:ring-purple-500",placeholder:"São Paulo",required:!0}),s.delivery_city&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.delivery_city})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estado *"}),e.jsxs("select",{value:t.delivery_state,onChange:r=>l("delivery_state",r.target.value),className:"w-full rounded-lg border-gray-300 focus:border-purple-500 focus:ring-purple-500",required:!0,children:[e.jsx("option",{value:"",children:"Selecione..."}),P.map(r=>e.jsx("option",{value:r,children:r},r))]}),s.delivery_state&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.delivery_state})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CEP *"}),e.jsx("input",{type:"text",value:t.delivery_zipcode,onChange:r=>l("delivery_zipcode",k(r.target.value)),className:"w-full rounded-lg border-gray-300 focus:border-purple-500 focus:ring-purple-500",placeholder:"01234-567",required:!0}),s.delivery_zipcode&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.delivery_zipcode})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 bg-yellow-100 text-yellow-600 rounded-lg flex items-center justify-center",children:"📝"}),"Observações"]}),e.jsx("textarea",{value:t.notes,onChange:r=>l("notes",r.target.value),rows:4,className:"w-full rounded-lg border-gray-300 focus:border-purple-500 focus:ring-purple-500",placeholder:"Informações adicionais sobre o pedido..."})]}),e.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:e.jsxs("button",{type:"button",onClick:()=>f(!i),className:"w-full text-orange-700 font-medium flex items-center justify-center gap-2",children:[e.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),i?"Ocultar":"Visualizar"," Resumo do Pedido"]})}),i&&e.jsxs("div",{className:"bg-purple-50 rounded-xl p-6 border border-purple-200",children:[e.jsx("h4",{className:"font-semibold text-purple-900 mb-4",children:"Resumo do Pedido:"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Cliente:"})," ",t.client_name," (",t.client_email,")"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Telefone:"})," ",t.client_phone]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Criança:"})," ",t.child_name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Bordado:"})," ",p[t.embroidery_color],", ",x[t.embroidery_font],", ",c[t.embroidery_position]]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Valor Total:"})," R$ ",parseFloat(t.total_amount||0).toFixed(2)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Valor Recebido:"})," R$ ",parseFloat(t.received_amount||0).toFixed(2)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Forma de Pagamento:"})," ",h[t.payment_method]]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Entrega:"})," ",t.delivery_address,", ",t.delivery_number," - ",t.delivery_city,"/",t.delivery_state]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-end",children:[e.jsx("a",{href:route("sales.index"),className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors text-center",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:m,className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:m?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processando..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Registrar Pedido"]})})]})]})})})})]})}export{S as default};
